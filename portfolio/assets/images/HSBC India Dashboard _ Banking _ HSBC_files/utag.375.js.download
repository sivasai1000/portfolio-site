//tealium universal tag - utag.375 ut4.0.202311071704, Copyright 2023 Tealium.com Inc. All Rights Reserved.
try{(function(id,loader){var u={"id":id};utag.o[loader].sender[id]=u;u.ev={"view":1};u.scriptrequested=u.scriptrequested||false;u.map={"global_persist_parameter":"persist_parameter","global_persist_classes":"persist_classes","global_persist_ids":"persist_ids","global_persist_key":"persist_key","global_persist_page_trigger":"page_trigger"};u.extend=[];u.send=function(a,b){if(u.ev[a]||u.ev.all!==undefined){utag.DB("send:375");utag.DB(b);var c,d,e,f;u.data={};utag.DB("send:375:EXTENSIONS");utag.DB(b);c=[];for(d in utag.loader.GV(u.map)){if(b[d]!==undefined&&b[d]!==""){e=u.map[d].split(",");for(f=0;f<e.length;f++){u.data[e[f]]=b[d];}}}
utag.DB("send:375:MAPPINGS");utag.DB(u.data);if(!u.scriptrequested){var tag=typeof b!=='undefined'?b:utag&&utag_data;(function(b,u){var Util={isString:function(x){return Object.prototype.toString.call(x)==="[object String]"},isArray:function(x){return Object.prototype.toString.call(x)==="[object Array]"},param:function(l){var aa=!/\?/.test(l)?"?":'',bb=(aa==''&&/\&/.test(l))?'&':''
cc=aa||bb||"&";return cc},convertArray:function(l){return Util.isArray(l)?l:l.split(',');},excludeAnchor:function(l){return/^\#./.test(l)}},d={id:b['qp.'+u.data['persist_key']]||b['qp.cid']||b['qp.pid'],classes:u.data["persist_classes"],ids:u.data["persist_ids"],parameter:u.data["persist_parameter"]||"mkt="};if(d.id&&u.data.page_trigger=="1"){(function(d){var href=document.getElementsByTagName('a')||document.anchor,len,i,ii,n,url;d.classes=(typeof d.classes!=="undefined")?Util.convertArray(d.classes):0;d.ids=(typeof d.ids!=="undefined")?Util.convertArray(d.ids):0;if(d.classes||d.ids){for(n=href.length-1;n>=0;n--){for(i=d.classes.length-1;i>=0;i--){if((!href[n].attributes&&!href[n].attributes.className)||Util.excludeAnchor(href[n].attributes['href']&&href[n].attributes['href'].value)||href[n].attributes["data-persisted"]){break}
if(href[n].className&&href[n].className.indexOf(d.classes[i])!=-1){url=href[n].attributes['href']&&href[n].attributes['href'].value;href[n].attributes['href'].value=url+Util.param(url)+d.parameter+"="+encodeURIComponent(d.id);href[n].attributes["data-persisted"]="1";}}
for(ii=d.ids.length-1;ii>=0;ii--){if((!href[n].attributes&&!href[n].attributes.id)||Util.excludeAnchor(href[n].attributes['href']&&href[n].attributes['href'].value)||href[n].attributes["data-persisted"]){break}
if(href[n].id&&href[n].id.indexOf(d.ids[ii])!=-1){url=href[n].attributes['href']&&href[n].attributes['href'].value;href[n].attributes['href'].value=url+Util.param(url)+d.parameter+"="+encodeURIComponent(d.id);href[n].attributes["data-persisted"]="1";}}}}}(d))}
function getLinkDomain(link){try{var url=(new URL(link));var linkDomain=url.hostname;var h=linkDomain .split("."),i=(/\.co\.|\.com\.|\.org\.|\.edu\.|\.net\.|\.asn\.|\...\.jp$/.test(linkDomain))?3:2;return h.slice(h.length-i).join(".");}
catch(e){TMS.debug.push(e)}}
function crossDomain(){try{var links=document.getElementsByTagName('a')||document.anchor;var currentDomain=TMS.util.getCookieDomain();var sid=utag_data["tealium_session_id"]||"";var vid=utag_data["tealium_visitor_id"]||"";var param;var profile="_"+utag_data["ut.profile"].substring(0,2);var linkDomain;if(sid&&vid){if(vid.indexOf(profile)>-1){vid=vid.replace(profile,"");}
param="vid="+vid+profile+"&"+"sid="+sid;}
if(param){for(var i=0;i<links.length;i++){if(links[i].href[0]!="/"&&links[i].href[0]!=""&&links[i].href[0]!="#"){linkDomain=getLinkDomain(links[i].href);if(linkDomain&&linkDomain!==currentDomain&&linkDomain.indexOf("hsbc.")>-1){links[i].href=links[i].href+Util.param(links[i].href)+param;}}}}}
catch(e){TMS.debug.push(e)}}
var configLinksTimeout=setTimeout(crossDomain,500);}(tag,u))}
utag.DB("send:375:COMPLETE");}};utag.o[loader].loader.LOAD(id);}("375","hsbc.in-rbwm-gsp"));}catch(error){utag.DB(error);}